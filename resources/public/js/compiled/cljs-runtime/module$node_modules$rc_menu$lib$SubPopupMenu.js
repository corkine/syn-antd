shadow$provide.module$node_modules$rc_menu$lib$SubPopupMenu=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function allDisabled(arr){return arr.length?arr.every(function(c){return!!c.props.disabled}):!0}function updateActiveKey(store,menuId,activeKey){var _extends2,state=store.getState();store.setState({activeKey:(0,_extends5["default"])({},state.activeKey,(_extends2={},_extends2[menuId]=activeKey,_extends2))})}
function getEventKey(props){return props.eventKey||"0-menu-"}function getActiveKey(props,originalActiveKey){var activeKey=originalActiveKey;originalActiveKey=props.children;var eventKey=props.eventKey;if(activeKey){var found=void 0;(0,_util.loopMenuItem)(originalActiveKey,function(c,i){c&&c.props&&!c.props.disabled&&activeKey===(0,_util.getKeyFromChildrenIndex)(c,eventKey,i)&&(found=!0)});if(found)return activeKey}activeKey=null;props.defaultActiveFirst&&(0,_util.loopMenuItem)(originalActiveKey,function(c,
i){activeKey||!c||c.props.disabled||(activeKey=(0,_util.getKeyFromChildrenIndex)(c,eventKey,i))});return activeKey}function saveRef(c){if(c){var index=this.instanceArray.indexOf(c);-1!==index?this.instanceArray[index]=c:this.instanceArray.push(c)}}exports.__esModule=!0;exports.SubPopupMenu=void 0;global=require("module$node_modules$babel_runtime$helpers$objectWithoutProperties");var _objectWithoutProperties3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$classCallCheck");
var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$extends");var _extends5=_interopRequireDefault(global);exports.getActiveKey=getActiveKey;exports.saveRef=saveRef;global=require("module$node_modules$react$index");
var _react2=_interopRequireDefault(global);global=require("module$node_modules$prop_types$index");global=_interopRequireDefault(global);process=require("module$node_modules$mini_store$lib$index");module=require("module$node_modules$rc_util$lib$KeyCode");var _KeyCode2=_interopRequireDefault(module);module=require("module$node_modules$rc_util$lib$createChainedFunction");var _createChainedFunction2=_interopRequireDefault(module);module=require("module$node_modules$classnames$index");var _classnames2=
_interopRequireDefault(module),_util=require("module$node_modules$rc_menu$lib$util");require=require("module$node_modules$rc_menu$lib$DOMWrap");var _DOMWrap2=_interopRequireDefault(require);require=exports.SubPopupMenu=function(_React$Component){function SubPopupMenu(props){var _extends3;(0,_classCallCheck3["default"])(this,SubPopupMenu);var _this=(0,_possibleConstructorReturn3["default"])(this,_React$Component.call(this,props));_initialiseProps.call(_this);props.store.setState({activeKey:(0,_extends5["default"])({},
props.store.getState().activeKey,(_extends3={},_extends3[props.eventKey]=getActiveKey(props,props.activeKey),_extends3))});_this.instanceArray=[];return _this}(0,_inherits3["default"])(SubPopupMenu,_React$Component);SubPopupMenu.prototype.componentDidMount=function(){this.props.manualRef&&this.props.manualRef(this)};SubPopupMenu.prototype.shouldComponentUpdate=function(nextProps){return this.props.visible||nextProps.visible};SubPopupMenu.prototype.componentDidUpdate=function(prevProps){var props=
this.props,originalActiveKey="activeKey"in props?props.activeKey:props.store.getState().activeKey[getEventKey(props)],activeKey=getActiveKey(props,originalActiveKey);activeKey!==originalActiveKey?updateActiveKey(props.store,getEventKey(props),activeKey):"activeKey"in prevProps&&(prevProps=getActiveKey(prevProps,prevProps.activeKey),activeKey!==prevProps&&updateActiveKey(props.store,getEventKey(props),activeKey))};SubPopupMenu.prototype.render=function(){var _this2=this,props=(0,_objectWithoutProperties3["default"])(this.props,
[]);this.instanceArray=[];var domProps={className:(0,_classnames2["default"])(props.prefixCls,props.className,props.prefixCls+"-"+props.mode),role:props.role||"menu"};props.id&&(domProps.id=props.id);props.focusable&&(domProps.tabIndex="0",domProps.onKeyDown=this.onKeyDown);var prefixCls=props.prefixCls,eventKey=props.eventKey,visible=props.visible,level=props.level,mode=props.mode,overflowedIndicator=props.overflowedIndicator,theme=props.theme;_util.menuAllProps.forEach(function(key){return delete props[key]});
delete props.onClick;return _react2["default"].createElement(_DOMWrap2["default"],(0,_extends5["default"])({},props,{prefixCls:prefixCls,mode:mode,tag:"ul",level:level,theme:theme,hiddenClassName:prefixCls+"-hidden",visible:visible,overflowedIndicator:overflowedIndicator},domProps),_react2["default"].Children.map(props.children,function(c,i){return _this2.renderMenuItem(c,i,eventKey||"0-menu-")}))};return SubPopupMenu}(_react2["default"].Component);require.propTypes={onSelect:global["default"].func,
onClick:global["default"].func,onDeselect:global["default"].func,onOpenChange:global["default"].func,onDestroy:global["default"].func,openTransitionName:global["default"].string,openAnimation:global["default"].oneOfType([global["default"].string,global["default"].object]),openKeys:global["default"].arrayOf(global["default"].string),visible:global["default"].bool,children:global["default"].any,parentMenu:global["default"].object,eventKey:global["default"].string,store:global["default"].shape({getState:global["default"].func,
setState:global["default"].func}),focusable:global["default"].bool,multiple:global["default"].bool,style:global["default"].object,defaultActiveFirst:global["default"].bool,activeKey:global["default"].string,selectedKeys:global["default"].arrayOf(global["default"].string),defaultSelectedKeys:global["default"].arrayOf(global["default"].string),defaultOpenKeys:global["default"].arrayOf(global["default"].string),level:global["default"].number,mode:global["default"].oneOf(["horizontal","vertical","vertical-left",
"vertical-right","inline"]),triggerSubMenuAction:global["default"].oneOf(["click","hover"]),inlineIndent:global["default"].oneOfType([global["default"].number,global["default"].string]),manualRef:global["default"].func,itemIcon:global["default"].oneOfType([global["default"].func,global["default"].node]),expandIcon:global["default"].oneOfType([global["default"].func,global["default"].node])};require.defaultProps={prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,
style:{},manualRef:_util.noop};var _initialiseProps=function(){var _this3=this;this.onKeyDown=function(e,callback){var keyCode=e.keyCode,handled=void 0;_this3.getFlatInstanceArray().forEach(function(obj){obj&&obj.props.active&&obj.onKeyDown&&(handled=obj.onKeyDown(e))});if(handled)return 1;var activeItem=null;if(keyCode===_KeyCode2["default"].UP||keyCode===_KeyCode2["default"].DOWN)activeItem=_this3.step(keyCode===_KeyCode2["default"].UP?-1:1);if(activeItem)return e.preventDefault(),updateActiveKey(_this3.props.store,
getEventKey(_this3.props),activeItem.props.eventKey),"function"===typeof callback&&callback(activeItem),1};this.onItemHover=function(e){var key=e.key;e=e.hover;updateActiveKey(_this3.props.store,getEventKey(_this3.props),e?key:null)};this.onDeselect=function(selectInfo){_this3.props.onDeselect(selectInfo)};this.onSelect=function(selectInfo){_this3.props.onSelect(selectInfo)};this.onClick=function(e){_this3.props.onClick(e)};this.onOpenChange=function(e){_this3.props.onOpenChange(e)};this.onDestroy=
function(key){_this3.props.onDestroy(key)};this.getFlatInstanceArray=function(){return _this3.instanceArray};this.getOpenTransitionName=function(){return _this3.props.openTransitionName};this.step=function(direction){var children=_this3.getFlatInstanceArray(),activeKey=_this3.props.store.getState().activeKey[getEventKey(_this3.props)],len=children.length;if(!len)return null;0>direction&&(children=children.concat().reverse());var activeIndex=-1;children.every(function(c,ci){return c&&c.props.eventKey===
activeKey?(activeIndex=ci,!1):!0});if(_this3.props.defaultActiveFirst||-1===activeIndex||!allDisabled(children.slice(activeIndex,len-1))){var i=direction=(activeIndex+1)%len;do{var child=children[i];if(!child||child.props.disabled)i=(i+1)%len;else return child}while(i!==direction);return null}};this.renderCommonMenuItem=function(child,i,extraProps){var state=_this3.props.store.getState(),props=_this3.props,key=(0,_util.getKeyFromChildrenIndex)(child,props.eventKey,i),childProps=child.props;if(!childProps||
"string"===typeof child.type)return child;state=key===state.activeKey;i=(0,_extends5["default"])({mode:childProps.mode||props.mode,level:props.level,inlineIndent:props.inlineIndent,renderMenuItem:_this3.renderMenuItem,rootPrefixCls:props.prefixCls,index:i,parentMenu:props.parentMenu,manualRef:childProps.disabled?void 0:(0,_createChainedFunction2["default"])(child.ref,saveRef.bind(_this3)),eventKey:key,active:!childProps.disabled&&state,multiple:props.multiple,onClick:function(e){(childProps.onClick||
_util.noop)(e);_this3.onClick(e)},onItemHover:_this3.onItemHover,openTransitionName:_this3.getOpenTransitionName(),openAnimation:props.openAnimation,subMenuOpenDelay:props.subMenuOpenDelay,subMenuCloseDelay:props.subMenuCloseDelay,forceSubMenuRender:props.forceSubMenuRender,onOpenChange:_this3.onOpenChange,onDeselect:_this3.onDeselect,onSelect:_this3.onSelect,builtinPlacements:props.builtinPlacements,itemIcon:childProps.itemIcon||_this3.props.itemIcon,expandIcon:childProps.expandIcon||_this3.props.expandIcon},
extraProps);if("inline"===props.mode||(0,_util.isMobileDevice)())i.triggerSubMenuAction="click";return _react2["default"].cloneElement(child,i)};this.renderMenuItem=function(c,i,subMenuKey){if(!c)return null;var state=_this3.props.store.getState();return _this3.renderCommonMenuItem(c,i,{openKeys:state.openKeys,selectedKeys:state.selectedKeys,triggerSubMenuAction:_this3.props.triggerSubMenuAction,subMenuKey:subMenuKey})}};require=(0,process.connect)()(require);exports["default"]=require}
//# sourceMappingURL=module$node_modules$rc_menu$lib$SubPopupMenu.js.map
