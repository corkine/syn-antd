shadow$provide.module$node_modules$rc_menu$lib$SubMenu=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;exports.SubMenu=void 0;global=require("module$node_modules$babel_runtime$helpers$classCallCheck");var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(global);
global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$extends");var _extends4=_interopRequireDefault(global);global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);global=require("module$node_modules$react_dom$index");var _reactDom2=_interopRequireDefault(global);global=require("module$node_modules$prop_types$index");global=_interopRequireDefault(global);
process=require("module$node_modules$rc_trigger$lib$index");var _rcTrigger2=_interopRequireDefault(process);process=require("module$node_modules$rc_util$lib$KeyCode");var _KeyCode2=_interopRequireDefault(process);process=require("module$node_modules$classnames$index");var _classnames2=_interopRequireDefault(process);process=require("module$node_modules$mini_store$lib$index");module=require("module$node_modules$rc_menu$lib$SubPopupMenu");var _SubPopupMenu2=_interopRequireDefault(module);module=require("module$node_modules$rc_menu$lib$placements");
var _placements2=_interopRequireDefault(module);module=require("module$node_modules$rc_animate$lib$Animate");var _rcAnimate2=_interopRequireDefault(module),_util=require("module$node_modules$rc_menu$lib$util"),guid=0,popupPlacementMap={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},updateDefaultActiveFirst=function(store,eventKey,defaultActiveFirst){var _extends2;eventKey=(0,_util.getMenuIdFromSubMenuEventKey)(eventKey);var state=store.getState();
store.setState({defaultActiveFirst:(0,_extends4["default"])({},state.defaultActiveFirst,(_extends2={},_extends2[eventKey]=defaultActiveFirst,_extends2))})};require=exports.SubMenu=function(_React$Component){function SubMenu(props){(0,_classCallCheck3["default"])(this,SubMenu);var _this=(0,_possibleConstructorReturn3["default"])(this,_React$Component.call(this,props));_initialiseProps.call(_this);var store=props.store;props=props.eventKey;var defaultActiveFirst=store.getState().defaultActiveFirst,
value=_this.isRootMenu=!1;defaultActiveFirst&&(value=defaultActiveFirst[props]);updateDefaultActiveFirst(store,props,value);return _this}(0,_inherits3["default"])(SubMenu,_React$Component);SubMenu.prototype.componentDidMount=function(){this.componentDidUpdate()};SubMenu.prototype.componentDidUpdate=function(){var _this2=this,_props=this.props,mode=_props.mode,parentMenu=_props.parentMenu;(_props=_props.manualRef)&&_props(this);"horizontal"===mode&&parentMenu.isRootMenu&&this.props.isOpen&&(this.minWidthTimeout=
setTimeout(function(){return _this2.adjustWidth()},0))};SubMenu.prototype.componentWillUnmount=function(){var _props2=this.props,onDestroy=_props2.onDestroy;_props2=_props2.eventKey;onDestroy&&onDestroy(_props2);this.minWidthTimeout&&clearTimeout(this.minWidthTimeout);this.mouseenterTimeout&&clearTimeout(this.mouseenterTimeout)};SubMenu.prototype.renderChildren=function(children){var props=this.props;props={mode:"horizontal"===props.mode?"vertical":props.mode,visible:this.props.isOpen,level:props.level+
1,inlineIndent:props.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:props.selectedKeys,eventKey:props.eventKey+"-menu-",openKeys:props.openKeys,openTransitionName:props.openTransitionName,openAnimation:props.openAnimation,onOpenChange:this.onOpenChange,subMenuOpenDelay:props.subMenuOpenDelay,parentMenu:this,subMenuCloseDelay:props.subMenuCloseDelay,forceSubMenuRender:props.forceSubMenuRender,triggerSubMenuAction:props.triggerSubMenuAction,
builtinPlacements:props.builtinPlacements,defaultActiveFirst:props.store.getState().defaultActiveFirst[(0,_util.getMenuIdFromSubMenuEventKey)(props.eventKey)],multiple:props.multiple,prefixCls:props.rootPrefixCls,id:this._menuId,manualRef:this.saveMenuInstance,itemIcon:props.itemIcon,expandIcon:props.expandIcon};var haveRendered=this.haveRendered;this.haveRendered=!0;this.haveOpened=this.haveOpened||props.visible||props.forceSubMenuRender;if(!this.haveOpened)return _react2["default"].createElement("div",
null);haveRendered=haveRendered||!props.visible||"inline"!==props.mode;props.className=" "+props.prefixCls+"-sub";var animProps={};props.openTransitionName?animProps.transitionName=props.openTransitionName:"object"===typeof props.openAnimation&&(animProps.animation=(0,_extends4["default"])({},props.openAnimation),haveRendered||delete animProps.animation.appear);return _react2["default"].createElement(_rcAnimate2["default"],(0,_extends4["default"])({},animProps,{showProp:"visible",component:"",transitionAppear:haveRendered}),
_react2["default"].createElement(_SubPopupMenu2["default"],(0,_extends4["default"])({},props,{id:this._menuId}),children))};SubMenu.prototype.render=function(){var _classNames,props=(0,_extends4["default"])({},this.props),isOpen=props.isOpen,prefixCls=this.getPrefixCls(),isInlineMode="inline"===props.mode,className=(0,_classnames2["default"])(prefixCls,prefixCls+"-"+props.mode,(_classNames={},_classNames[props.className]=!!props.className,_classNames[this.getOpenClassName()]=isOpen,_classNames[this.getActiveClassName()]=
props.active||isOpen&&!isInlineMode,_classNames[this.getDisabledClassName()]=props.disabled,_classNames[this.getSelectedClassName()]=this.isChildrenSelected(),_classNames));this._menuId||(this._menuId=props.eventKey?props.eventKey+"$Menu":"$__$"+ ++guid+"$Menu");_classNames={};var titleClickEvents={},titleMouseEvents={};props.disabled||(_classNames={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},titleClickEvents={onClick:this.onTitleClick},titleMouseEvents={onMouseEnter:this.onTitleMouseEnter,
onMouseLeave:this.onTitleMouseLeave});var style={};isInlineMode&&(style.paddingLeft=props.inlineIndent*props.level);var ariaOwns={};this.props.isOpen&&(ariaOwns={"aria-owns":this._menuId});var icon=null;"horizontal"!==props.mode&&(icon=this.props.expandIcon,"function"===typeof this.props.expandIcon&&(icon=_react2["default"].createElement(this.props.expandIcon,(0,_extends4["default"])({},this.props))));titleClickEvents=_react2["default"].createElement("div",(0,_extends4["default"])({ref:this.saveSubMenuTitle,
style:style,className:prefixCls+"-title"},titleMouseEvents,titleClickEvents,{"aria-expanded":isOpen},ariaOwns,{"aria-haspopup":"true",title:"string"===typeof props.title?props.title:void 0}),props.title,icon||_react2["default"].createElement("i",{className:prefixCls+"-arrow"}));titleMouseEvents=this.renderChildren(props.children);style=props.parentMenu.isRootMenu?props.parentMenu.props.getPopupContainer:function(triggerNode){return triggerNode.parentNode};ariaOwns=popupPlacementMap[props.mode];icon=
props.popupOffset?{offset:props.popupOffset}:{};var popupClassName="inline"===props.mode?"":props.popupClassName,disabled=props.disabled,triggerSubMenuAction=props.triggerSubMenuAction,subMenuOpenDelay=props.subMenuOpenDelay,forceSubMenuRender=props.forceSubMenuRender,subMenuCloseDelay=props.subMenuCloseDelay,builtinPlacements=props.builtinPlacements;_util.menuAllProps.forEach(function(key){return delete props[key]});delete props.onClick;return _react2["default"].createElement("li",(0,_extends4["default"])({},
props,_classNames,{className:className,role:"menuitem"}),isInlineMode&&titleClickEvents,isInlineMode&&titleMouseEvents,!isInlineMode&&_react2["default"].createElement(_rcTrigger2["default"],{prefixCls:prefixCls,popupClassName:prefixCls+"-popup "+popupClassName,getPopupContainer:style,builtinPlacements:(0,_extends4["default"])({},_placements2["default"],builtinPlacements),popupPlacement:ariaOwns,popupVisible:isOpen,popupAlign:icon,popup:titleMouseEvents,action:disabled?[]:[triggerSubMenuAction],mouseEnterDelay:subMenuOpenDelay,
mouseLeaveDelay:subMenuCloseDelay,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:forceSubMenuRender},titleClickEvents))};return SubMenu}(_react2["default"].Component);require.propTypes={parentMenu:global["default"].object,title:global["default"].node,children:global["default"].any,selectedKeys:global["default"].array,openKeys:global["default"].array,onClick:global["default"].func,onOpenChange:global["default"].func,rootPrefixCls:global["default"].string,eventKey:global["default"].string,
multiple:global["default"].bool,active:global["default"].bool,onItemHover:global["default"].func,onSelect:global["default"].func,triggerSubMenuAction:global["default"].string,onDeselect:global["default"].func,onDestroy:global["default"].func,onMouseEnter:global["default"].func,onMouseLeave:global["default"].func,onTitleMouseEnter:global["default"].func,onTitleMouseLeave:global["default"].func,onTitleClick:global["default"].func,popupOffset:global["default"].array,isOpen:global["default"].bool,store:global["default"].object,
mode:global["default"].oneOf(["horizontal","vertical","vertical-left","vertical-right","inline"]),manualRef:global["default"].func,itemIcon:global["default"].oneOfType([global["default"].func,global["default"].node]),expandIcon:global["default"].oneOfType([global["default"].func,global["default"].node])};require.defaultProps={onMouseEnter:_util.noop,onMouseLeave:_util.noop,onTitleMouseEnter:_util.noop,onTitleMouseLeave:_util.noop,onTitleClick:_util.noop,manualRef:_util.noop,mode:"vertical",title:""};
var _initialiseProps=function(){var _this3=this;this.onDestroy=function(key){_this3.props.onDestroy(key)};this.onKeyDown=function(e){var keyCode=e.keyCode,menu=_this3.menuInstance,_props3=_this3.props,isOpen=_props3.isOpen;_props3=_props3.store;if(keyCode===_KeyCode2["default"].ENTER)return _this3.onTitleClick(e),updateDefaultActiveFirst(_props3,_this3.props.eventKey,!0),!0;if(keyCode===_KeyCode2["default"].RIGHT){if(isOpen)menu.onKeyDown(e);else _this3.triggerOpenChange(!0),updateDefaultActiveFirst(_props3,
_this3.props.eventKey,!0);return!0}if(keyCode===_KeyCode2["default"].LEFT){if(isOpen)e=menu.onKeyDown(e);else return;e||(_this3.triggerOpenChange(!1),e=!0);return e}if(isOpen&&(keyCode===_KeyCode2["default"].UP||keyCode===_KeyCode2["default"].DOWN))return menu.onKeyDown(e)};this.onOpenChange=function(e){_this3.props.onOpenChange(e)};this.onPopupVisibleChange=function(visible){_this3.triggerOpenChange(visible,visible?"mouseenter":"mouseleave")};this.onMouseEnter=function(e){var _props4=_this3.props,
key=_props4.eventKey,onMouseEnter=_props4.onMouseEnter;updateDefaultActiveFirst(_props4.store,_this3.props.eventKey,!1);onMouseEnter({key:key,domEvent:e})};this.onMouseLeave=function(e){var _props5=_this3.props,eventKey=_props5.eventKey,onMouseLeave=_props5.onMouseLeave;_props5.parentMenu.subMenuInstance=_this3;onMouseLeave({key:eventKey,domEvent:e})};this.onTitleMouseEnter=function(domEvent){var _props6=_this3.props,key=_props6.eventKey,onItemHover=_props6.onItemHover;_props6=_props6.onTitleMouseEnter;
onItemHover({key:key,hover:!0});_props6({key:key,domEvent:domEvent})};this.onTitleMouseLeave=function(e){var _props7=_this3.props,eventKey=_props7.eventKey,onItemHover=_props7.onItemHover,onTitleMouseLeave=_props7.onTitleMouseLeave;_props7.parentMenu.subMenuInstance=_this3;onItemHover({key:eventKey,hover:!1});onTitleMouseLeave({key:eventKey,domEvent:e})};this.onTitleClick=function(e){var props=_this3.props;props.onTitleClick({key:props.eventKey,domEvent:e});"hover"!==props.triggerSubMenuAction&&(_this3.triggerOpenChange(!props.isOpen,
"click"),updateDefaultActiveFirst(props.store,_this3.props.eventKey,!1))};this.onSubMenuClick=function(info){if("function"===typeof _this3.props.onClick)_this3.props.onClick(_this3.addKeyPath(info))};this.onSelect=function(info){_this3.props.onSelect(info)};this.onDeselect=function(info){_this3.props.onDeselect(info)};this.getPrefixCls=function(){return _this3.props.rootPrefixCls+"-submenu"};this.getActiveClassName=function(){return _this3.getPrefixCls()+"-active"};this.getDisabledClassName=function(){return _this3.getPrefixCls()+
"-disabled"};this.getSelectedClassName=function(){return _this3.getPrefixCls()+"-selected"};this.getOpenClassName=function(){return _this3.props.rootPrefixCls+"-submenu-open"};this.saveMenuInstance=function(c){_this3.menuInstance=c};this.addKeyPath=function(info){return(0,_extends4["default"])({},info,{keyPath:(info.keyPath||[]).concat(_this3.props.eventKey)})};this.triggerOpenChange=function(open,type){var key=_this3.props.eventKey,openChange=function(){_this3.onOpenChange({key:key,item:_this3,trigger:type,
open:open})};"mouseenter"===type?_this3.mouseenterTimeout=setTimeout(function(){openChange()},0):openChange()};this.isChildrenSelected=function(){var ret={find:!1};(0,_util.loopMenuItemRecursively)(_this3.props.children,_this3.props.selectedKeys,ret);return ret.find};this.isOpen=function(){return-1!==_this3.props.openKeys.indexOf(_this3.props.eventKey)};this.adjustWidth=function(){if(_this3.subMenuTitle&&_this3.menuInstance){var popupMenu=_reactDom2["default"].findDOMNode(_this3.menuInstance);popupMenu.offsetWidth>=
_this3.subMenuTitle.offsetWidth||(popupMenu.style.minWidth=_this3.subMenuTitle.offsetWidth+"px")}};this.saveSubMenuTitle=function(subMenuTitle){_this3.subMenuTitle=subMenuTitle}};require=(0,process.connect)(function(_ref,_ref2){var activeKey=_ref.activeKey,selectedKeys=_ref.selectedKeys,eventKey=_ref2.eventKey;_ref2=_ref2.subMenuKey;return{isOpen:-1<_ref.openKeys.indexOf(eventKey),active:activeKey[_ref2]===eventKey,selectedKeys:selectedKeys}})(require);require.isSubMenu=!0;exports["default"]=require}
//# sourceMappingURL=module$node_modules$rc_menu$lib$SubMenu.js.map
