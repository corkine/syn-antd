shadow$provide.module$node_modules$rc_menu$lib$DOMWrap=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;global=require("module$node_modules$babel_runtime$helpers$extends");var _extends3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$objectWithoutProperties");var _objectWithoutProperties3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$classCallCheck");
var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);global=require("module$node_modules$react_dom$index");var _reactDom2=_interopRequireDefault(global);
global=require("module$node_modules$prop_types$index");global=_interopRequireDefault(global);process=require("module$node_modules$resize_observer_polyfill$dist$ResizeObserver");var _resizeObserverPolyfill2=_interopRequireDefault(process);process=require("module$node_modules$rc_menu$lib$SubMenu");var _SubMenu2=_interopRequireDefault(process),_util=require("module$node_modules$rc_menu$lib$util");"undefined"!==typeof window&&window.document&&window.document.createElement&&require("module$node_modules$mutationobserver_shim$dist$mutationobserver_min");
require=function(_React$Component){function DOMWrap(){var _temp,_this,_ret;(0,_classCallCheck3["default"])(this,DOMWrap);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=(0,_possibleConstructorReturn3["default"])(this,_React$Component.call.apply(_React$Component,[this].concat(args))),_this),_this.state={lastVisibleIndex:void 0},_this.getMenuItemNodes=function(){var prefixCls=_this.props.prefixCls,ul=_reactDom2["default"].findDOMNode(_this);
return ul?[].slice.call(ul.children).filter(function(node){return 0>node.className.split(" ").indexOf(prefixCls+"-overflowed-submenu")}):[]},_this.getOverflowedSubMenuItem=function(keyPrefix,overflowedItems,renderPlaceholder){var _this$props=_this.props,overflowedIndicator=_this$props.overflowedIndicator,mode=_this$props.mode,prefixCls=_this$props.prefixCls,theme=_this$props.theme;if(1!==_this$props.level||"horizontal"!==mode)return null;_this$props=_this.props.children[0].props;mode=_this$props.style;
var rest=(0,_objectWithoutProperties3["default"])(_this$props,["children","title","style"]);_this$props=(0,_extends3["default"])({},mode);mode=keyPrefix+"-overflowed-indicator";keyPrefix+="-overflowed-indicator";0===overflowedItems.length&&!0!==renderPlaceholder?_this$props=(0,_extends3["default"])({},_this$props,{display:"none"}):renderPlaceholder&&(_this$props=(0,_extends3["default"])({},_this$props,{visibility:"hidden",position:"absolute"}),mode+="-placeholder",keyPrefix+="-placeholder");renderPlaceholder=
theme?prefixCls+"-"+theme:"";var props={};_util.menuAllProps.forEach(function(k){void 0!==rest[k]&&(props[k]=rest[k])});return _react2["default"].createElement(_SubMenu2["default"],(0,_extends3["default"])({title:overflowedIndicator,className:prefixCls+"-overflowed-submenu",popupClassName:renderPlaceholder},props,{key:mode,eventKey:keyPrefix,disabled:!1,style:_this$props}),overflowedItems)},_this.setChildrenWidthAndResize=function(){if("horizontal"===_this.props.mode){var ul=_reactDom2["default"].findDOMNode(_this);
if(ul){var ulChildrenNodes=ul.children;if(ulChildrenNodes&&0!==ulChildrenNodes.length){ulChildrenNodes=ul.children[ulChildrenNodes.length-1];(0,_util.setStyle)(ulChildrenNodes,"display","inline-block");var menuItemNodes=_this.getMenuItemNodes(),overflowedItems=menuItemNodes.filter(function(c){return 0<=c.className.split(" ").indexOf("menuitem-overflowed")});overflowedItems.forEach(function(c){(0,_util.setStyle)(c,"display","inline-block")});_this.menuItemSizes=menuItemNodes.map(function(c){return(0,
_util.getWidth)(c)});overflowedItems.forEach(function(c){(0,_util.setStyle)(c,"display","none")});_this.overflowedIndicatorWidth=(0,_util.getWidth)(ul.children[ul.children.length-1]);_this.originalTotalWidth=_this.menuItemSizes.reduce(function(acc,cur){return acc+cur},0);_this.handleResize();(0,_util.setStyle)(ulChildrenNodes,"display","none")}}}},_this.resizeObserver=null,_this.mutationObserver=null,_this.originalTotalWidth=0,_this.overflowedItems=[],_this.menuItemSizes=[],_this.handleResize=function(){if("horizontal"===
_this.props.mode){var ul=_reactDom2["default"].findDOMNode(_this);if(ul){var width=(0,_util.getWidth)(ul);_this.overflowedItems=[];var currentSumWidth=0,lastVisibleIndex=void 0;_this.originalTotalWidth>width+.5&&(lastVisibleIndex=-1,_this.menuItemSizes.forEach(function(liWidth){currentSumWidth+=liWidth;currentSumWidth+_this.overflowedIndicatorWidth<=width&&lastVisibleIndex++}));_this.setState({lastVisibleIndex:lastVisibleIndex})}}},_temp),(0,_possibleConstructorReturn3["default"])(_this,_ret)}(0,
_inherits3["default"])(DOMWrap,_React$Component);DOMWrap.prototype.componentDidMount=function(){var _this2=this;this.setChildrenWidthAndResize();if(1===this.props.level&&"horizontal"===this.props.mode){var menuUl=_reactDom2["default"].findDOMNode(this);menuUl&&(this.resizeObserver=new _resizeObserverPolyfill2["default"](function(entries){entries.forEach(_this2.setChildrenWidthAndResize)}),[].slice.call(menuUl.children).concat(menuUl).forEach(function(el){_this2.resizeObserver.observe(el)}),"undefined"!==
typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(){_this2.resizeObserver.disconnect();[].slice.call(menuUl.children).concat(menuUl).forEach(function(el){_this2.resizeObserver.observe(el)});_this2.setChildrenWidthAndResize()}),this.mutationObserver.observe(menuUl,{attributes:!1,childList:!0,subTree:!1})))}};DOMWrap.prototype.componentWillUnmount=function(){this.resizeObserver&&this.resizeObserver.disconnect();this.mutationObserver&&this.resizeObserver.disconnect()};DOMWrap.prototype.renderChildren=
function(children){var _this3=this,lastVisibleIndex=this.state.lastVisibleIndex;return(children||[]).reduce(function(acc,childNode,index){var item=childNode;if("horizontal"===_this3.props.mode){var overflowed=_this3.getOverflowedSubMenuItem(childNode.props.eventKey,[]);void 0!==lastVisibleIndex&&-1!==_this3.props.className.indexOf(_this3.props.prefixCls+"-root")&&(index>lastVisibleIndex&&(item=_react2["default"].cloneElement(childNode,{style:{display:"none"},eventKey:childNode.props.eventKey+"-hidden",
className:childNode.className+" menuitem-overflowed"})),index===lastVisibleIndex+1&&(_this3.overflowedItems=children.slice(lastVisibleIndex+1).map(function(c){return _react2["default"].cloneElement(c,{key:c.props.eventKey,mode:"vertical-left"})}),overflowed=_this3.getOverflowedSubMenuItem(childNode.props.eventKey,_this3.overflowedItems)));acc=[].concat(acc,[overflowed,item]);index===children.length-1&&acc.push(_this3.getOverflowedSubMenuItem(childNode.props.eventKey,[],!0));return acc}return[].concat(acc,
[item])},[])};DOMWrap.prototype.render=function(){var _props=this.props,hiddenClassName=_props.hiddenClassName,visible=_props.visible,Tag=_props.tag;_props=(0,_objectWithoutProperties3["default"])(_props,"hiddenClassName visible prefixCls overflowedIndicator mode level tag children theme".split(" "));visible||(_props.className+=" "+hiddenClassName);return _react2["default"].createElement(Tag,_props,this.renderChildren(this.props.children))};return DOMWrap}(_react2["default"].Component);require.propTypes=
{className:global["default"].string,children:global["default"].node,mode:global["default"].oneOf(["horizontal","vertical","vertical-left","vertical-right","inline"]),prefixCls:global["default"].string,level:global["default"].number,theme:global["default"].string,overflowedIndicator:global["default"].node,visible:global["default"].bool,hiddenClassName:global["default"].string,tag:global["default"].string,style:global["default"].object};require.defaultProps={tag:"div",className:""};exports["default"]=
require;module.exports=exports["default"]}
//# sourceMappingURL=module$node_modules$rc_menu$lib$DOMWrap.js.map
